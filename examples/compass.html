<html>
<head>
<!--
Escape from the Wilderness
==========================

If you're looking for something, it's really useful to know where you are--and the geolocation API provided by HTML5 is a great way to find out. Using [Geous.js](http://rjzaworski.com/projects/geous) to handle the heavy lifting, we'll find a way out of here in no time.

	<script src="https://raw.github.com/rjz/geous.js/master/src/geous.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
	<script>
	function compass(destination) {

		var me = geous.Me,
			heading,
			distance;

		heading = geous.compute.compassHeading(me, destination);
		distance = geous.compute.distanceBetween(me, destination);
		
		return Math.round(distance*10)/10 + 'km ' + heading;
	}
	
	function init() {

		var beervana = new google.maps.LatLng(45.521744, -122.695313);		
		alert( 'Beervana is ' + compass(beervana));
	}
	
	geous.withMe( init );
	</script>

Get that? First, we defined a `compass` function that uses Geous to compute the distance and heading between us and our destination--Portland, aka the Rose City, aka Beervana. This process takes advantage of two built-in functions:

* `geous.compute.compass` returns a heading (e.g., 'NW' or 'SSW') in string form
* `geous.compute.distanceBetween` returns the distance between two points in kilometers

We've kept it pretty simple here, but we could also use `geous.compute.initialBearing` to tie a more precise heading into the compass's readout. We could even convert the distance (currently in km) to local miles if we needed to--but Portland's a pretty hip place, so we won't bother.

Next, we created an `init` function that will be called as soon as Geous is ready to go (that's the `withMe` part in the last line). `init` calls `compass`, and the rest, as they say, will speak for itself.

You can see a Geous compass in action in the [Portland Beer Compass]() demo. Or, [download the example project](...) from github
-->

<style>
body { 
	background-color:#f2eeeb; 
	font:normal 8pt copse, serif;
}
a:link, a:visited {
	color:#9093CE;
}
.buck-up,
.remaining {
	display:block;
	font-size:28pt;
	line-height:1.3em;
	margin:20px 0;
}
.buck-up {
	font-size:26pt;
}
.buck-up strong {
	text-transform:uppercase;
}
.compass {
	font-family:copse, serif;
	text-align:center;
	text-shadow:0 1px #fff;
}
.container {
	margin:auto;
	text-align:center;
	width:320px;
}
.digit {
	background-color:#231f20;
	box-shadow:3px 3px #cdbfbc;
	color:#fff;
	display:inline-block;
	margin-right:5px;
	padding:10px 10px;
}
.digit:nth-child(2n+1) {
	position:relative;
	top:-3px;
}
.distance {
	font:normal 40pt copse, arial;
}
</style>
</head>
<body>
        <div class="container">
			<p class="compass"></p>
			<p>Powered by <a href="blog.rjzaworski.com/2011/09/geous-js-geolocation-made-easy/">Geous</a></p>
        </div><!--.container -->
<script src="../src/geous.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>

	function compass(destination) {

		var me = geous.Me,
			heading,
			distance,
			_digits = function(num) {
				num = num.toString();
				return num.replace(/([0-9])/g,'<span class="digit">$1</span>');
			};

		heading = geous.compute.compassHeading(me, destination, true);
		distance = geous.compute.distanceBetween(me, destination);

		if (distance < 10) {
			return 'You\'re made it, mate!';
		} else {
			return '<span class="buck-up">Keep walking <strong>' + heading + '</strong>, soldier&mdash;</span><span class="distance">' + _digits(Math.round(distance*10)/10) + '</span>km<span class="remaining">left between you and a decent beer.</span>';
		}
	}
	
	function init() {

		var $ = jQuery;
	
		var beervana = new google.maps.LatLng(45.521744, -122.695313);		
		$('.compass').html( compass(beervana) );
		//$('.buck-up').fitText();
		//$('.remaining').fitText();
	}
	
	geous.withMe( init );
</script>

</body>
</html>